:root{
  /* JASNY (domy≈õlny) */
  --gap:12px; --radius:12px; --shadow:0 8px 26px rgba(0,0,0,.06);

  --bg:#f6f7fb; --fg:#212; --muted:#666; --card-bg:#fff; --border:#e9e9ef;
  --entry-alt:#fcfcff; --tab-bg:#fff; --badge-bg:#efefef; --secondary-bg:#eee;

  --btn-bg:#222; --btn-fg:#fff;

  /* chipy (filtry) */
  --chip-bg:#f3f4f6; --chip-fg:#222; --chip-border:#dcdde2;
}

/* CIEMNY (po dodaniu klasy .theme-dark na <html>) */
.theme-dark{
  --bg:#0f1116; --fg:#e5e7eb; --muted:#9aa0a6; --card-bg:#151922; --border:#2a2f3a;
  --entry-alt:#101522; --tab-bg:#151922; --badge-bg:#252b36; --secondary-bg:#2a2f3a;

  --btn-bg:#e5e7eb; --btn-fg:#111;

  --chip-bg:#1e2431; --chip-fg:#e5e7eb; --chip-border:#2f3542;
}

/* iOS: nie powiƒôkszaj fontu po focusie */
html{-webkit-text-size-adjust:100%}
input,select,textarea{font-size:16px}

*{box-sizing:border-box}
html,body{height:100%;max-width:100%;overflow-x:hidden}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--fg); background:var(--bg);
  overscroll-behavior-x:none;
}

.wrap{
  width:100%; max-width:980px; margin:0 auto; padding:16px;
  display:grid; gap:16px;
}
.card{background:var(--card-bg);border-radius:var(--radius);padding:16px 18px;box-shadow:var(--shadow)}
header.card{display:grid;gap:6px}
h1,h2,h3{margin:0 0 8px}
.muted{color:var(--muted)}

.row{display:flex;gap:var(--gap);align-items:center;flex-wrap:wrap;min-width:0}
.row.tight{gap:8px}
.stack{display:grid;gap:10px}
.grow{flex:1;min-width:200px}
.w-80{width:80px}
.m-top{margin-top:8px}
.spacer{margin-left:auto}

input[type="text"],input[type="password"],input[type="number"],input[type="url"],textarea{
  padding:10px 12px;border:1px solid var(--border);border-radius:10px;min-width:0;
  color:var(--fg);background:transparent
}
textarea{min-height:70px;resize:vertical}
button{
  padding:10px 14px;border:0;border-radius:10px;cursor:pointer;font-weight:600;
  background:var(--btn-bg);color:var(--btn-fg);flex:0 0 auto
}
button.secondary{background:var(--secondary-bg);color:var(--fg)}
button.ghost{background:transparent;border:1px solid var(--border);color:var(--fg)}
button.danger{background:#e84a5f;color:#fff}
button.small{padding:8px 10px}
.divider{height:1px;background:var(--border);margin:8px 0}

/* Zak≈Çadki ‚Äì brak sticky, 1 rzƒÖd, przewijane w poziomie */
.tabs{position:static;margin:4px 0 8px}
.tabs .bar{
  display:flex;gap:6px;padding:6px;
  background:var(--tab-bg);border-radius:var(--radius);box-shadow:var(--shadow);
  flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none
}
.tabs .bar::-webkit-scrollbar{display:none}
.tabs .bar button{
  background:transparent;color:var(--fg);border:0;padding:10px 12px;border-radius:10px;white-space:nowrap;flex:0 0 auto
}
.tabs .bar button.active{background:var(--btn-bg);color:var(--btn-fg)}

/* Widoki i stan zablokowany */
section.view{display:none}
section.view.active{display:block}
.locked .tabs{display:none}
.unlocked .tabs{display:block}
.locked .view{display:none!important}

/* Szukajka + ikona motywu */
.input-wrap{position:relative;display:flex;align-items:center;min-width:0;flex:1}
.input-wrap input{width:100%;min-width:0;padding-right:56px}
.icon-btn{
  position:absolute;right:6px;top:50%;transform:translateY(-50%);
  width:40px;height:40px;border-radius:10px;border:1px solid var(--border);
  background:var(--secondary-bg);color:inherit;display:flex;align-items:center;justify-content:center;
  line-height:1;font-size:18px
}
.icon-btn:active{transform:translateY(-50%) scale(.98)}

/* Filtry */
.filters{margin-top:8px;display:flex;gap:8px;flex-wrap:wrap;min-width:0}
.filters .chip{padding:6px 12px;border-radius:999px;background:var(--chip-bg);color:var(--chip-fg);border:1px solid var(--chip-border)}
.filters .chip.active{background:var(--btn-bg);color:var(--btn-fg);border-color:transparent}

/* Pod≈õwietlanie fraz */
mark{background:#fff199;padding:0 2px;border-radius:3px}

/* Lista wpis√≥w */
.list{display:grid;gap:10px;min-width:0}

/* Karta wpisu */
.entry{
  position:relative;border:1px solid var(--border);border-radius:12px;padding:12px 12px 12px 14px;
  background:var(--card-bg);display:grid;gap:8px;transition:box-shadow .15s,border-color .15s,transform .02s;max-width:100%
}
.entry::before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;border-radius:12px 0 0 12px;background:var(--stripe,#6ea8fe);opacity:.9}
.list .entry:nth-child(odd){background:var(--entry-alt)}
@media (hover:hover){.entry:hover{box-shadow:0 8px 22px rgba(0,0,0,.12);border-color:#bbb}}

.entry-header{display:flex;justify-content:space-between;gap:10px;align-items:center}
.entry-title{font-weight:700;word-break:break-word}
.badges{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.badge{background:var(--badge-bg);padding:4px 8px;border-radius:999px;font-size:12px}

.grid{display:grid;gap:10px;grid-template-columns:repeat(2,minmax(220px,1fr))}
.full{grid-column:1 / -1}
.copy-ok{font-size:12px;color:#0a7}

/* Neon na Tytu≈Ç */
.entry .grid>label:first-child{
  display:grid;gap:6px;padding:8px;border-radius:12px;border:1px solid var(--accent,#6ea8fe);
  background:color-mix(in hsl, var(--accent) 6%, transparent);
  border-color:color-mix(in hsl, var(--accent) 35%, var(--border));
  box-shadow:0 0 0 1px color-mix(in hsl, var(--accent) 18%, transparent) inset
}
.entry input[data-field="title"]{
  border-color:var(--accent,#6ea8fe);
  box-shadow:0 0 0 2px color-mix(in hsl, var(--accent) 30%, transparent),
             0 0 16px color-mix(in hsl, var(--accent) 45%, transparent)
}
.entry .grid>label:first-child:focus-within input[data-field="title"]{
  box-shadow:0 0 0 3px color-mix(in hsl, var(--accent) 45%, transparent),
             0 0 22px color-mix(in hsl, var(--accent) 65%, transparent)
}

/* Miernik si≈Çy */
.meter{display:grid;gap:6px}
.bar{height:8px;background:#2a2f3a22;border-radius:999px;overflow:hidden}
.bar>span{display:block;height:100%;width:0%;transition:width .25s;background:linear-gradient(90deg,#ff4d4f,#ffa940,#ffd666,#73d13d,#36cfc9)}
.meter .label{font-size:12px;color:var(--muted)}

/* Audyt */
.audit-list{display:grid;gap:8px}
.audit-item{border:1px solid var(--border);border-radius:10px;padding:10px;background:var(--card-bg)}
.good{color:#0a7}.warn{color:#f59f00}.bad{color:#e84a5f}

/* Generator */
.genOut{min-width:0;flex:1}

/* Backup */
.file-row{align-items:center;gap:8px}
#fileName.ellipsis{max-width:40ch;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
@media (max-width:720px){#fileName.ellipsis{max-width:60vw}}

/* Mobile siatka */
@media (max-width:720px){
  .grid{grid-template-columns:1fr}
}
/* ‚Äî‚Äî‚Äî Widoczno≈õƒá paska / hamburgera ‚Äî‚Äî‚Äî */
.hide-mobile{ display:flex; }
.show-mobile{ display:none; }
@media (max-width:720px){
  .hide-mobile{ display:none; }
  .show-mobile{ display:inline-flex; }
}

/* ‚Äî‚Äî‚Äî Przycisk hamburgera ‚Äî‚Äî‚Äî */
.hamburger{
  padding:10px 12px; border-radius:10px; border:1px solid var(--border);
  background:var(--secondary-bg); color:var(--fg); font-weight:700; line-height:1;
}

/* ‚Äî‚Äî‚Äî Panel menu (bottom sheet) ‚Äî‚Äî‚Äî */
.menu-panel{ position:fixed; inset:0; z-index:9999; }
.menu-panel[hidden]{ display:none; }
.menu-backdrop{
  position:absolute; inset:0; background:rgba(0,0,0,.45); backdrop-filter:blur(2px);
}
.menu-sheet{
  position:absolute; left:0; right:0; bottom:0;
  background:var(--card-bg); border-radius:16px 16px 0 0; box-shadow:0 -10px 30px rgba(0,0,0,.35);
  padding:14px; transform:translateY(100%); transition:transform .18s ease-out;
}
.menu-panel.open .menu-sheet{ transform:translateY(0); }
.menu-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.menu-close{
  border:1px solid var(--border); background:var(--secondary-bg); color:var(--fg);
  border-radius:10px; padding:8px 10px;
}
.menu-items{ display:grid; gap:8px; }
.menu-items button{
  text-align:left; padding:12px; border-radius:12px; border:1px solid var(--border);
  background:var(--tab-bg); color:var(--fg); font-weight:600;
}

/* (opcjonalnie) delikatnie mniejszy cie≈Ñ nag≈Ç√≥wka, by menu nie wyglƒÖda≈Ço na ‚Äûuciƒôte‚Äù */
header.card{ box-shadow:0 6px 20px rgba(0,0,0,.05); }
/* === HARD HIDE starego paska zak≈Çadek na telefonie === */
@media (max-width: 820px){
  /* ukryj desktopowy pasek */
  .tabs .bar{ 
    display: none !important;
    height: 0 !important; padding: 0 !important; margin: 0 !important;
    border: 0 !important; box-shadow: none !important; overflow: hidden !important;
  }
  /* poka≈º hamburger */
  .hamburger{ display: inline-flex !important; }
}

/* === Stabilizacja szeroko≈õci i centrowanie === */
html, body { width: 100%; max-width: 100%; overflow-x: hidden; }
.wrap { width: min(980px, 100%); max-width: 100%; margin-left: auto; margin-right: auto; padding-left: 16px; padding-right: 16px; }
.card, .entry { max-width: 100%; }
.row, .input-wrap, .filters, .list { min-width: 0; }
.input-wrap input { width: 100%; min-width: 0; }
/* === Maska ekran√≥w (privacy) === */
.privacy-mask{
  position: fixed; inset: 0; z-index: 10000;
  background: rgba(10,12,16,.65);
  backdrop-filter: blur(10px) saturate(60%);
}
.privacy-mask::after{
  content: 'üîê'; position: absolute; left: 50%; top: 50%;
  transform: translate(-50%,-50%); font-size: 34px; opacity: .9;
}

/* Na mobile nadal chowamy stary pasek, hamburger zostaje */
@media (max-width: 820px){
  .tabs .bar{ display:none !important; height:0 !important; padding:0 !important; margin:0 !important; border:0 !important; box-shadow:none !important; overflow:hidden !important; }
  .hamburger{ display:inline-flex !important; }
}
/* Maska ‚Äì tryb ‚Äûtwardy‚Äù (rozmywa ca≈Çy dokument) */
html.masked .wrap { 
  filter: blur(16px) brightness(0.7);
  transition: none;
}
/* upewnij siƒô, ≈ºe nak≈Çadka pojawia siƒô natychmiast */
.privacy-mask { opacity: 1; transition: none; }
/* === Historia hase≈Ç w karcie wpisu === */
.pw-hist{ margin-top:8px; }
.pw-hist summary{ cursor:pointer; color:var(--muted); }
.pw-hist .row{ margin-top:6px; }
.pw-hist input.hist{ flex:1; min-width:0; }