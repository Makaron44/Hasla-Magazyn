<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#f6f7fb">
  <title>Sejf Hase≈Ç (Lokalny)</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16.png">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div class="locked">
    <header class="card header">
      <div class="title">üîê Sejf Hase≈Ç</div>
      <div class="actions">
        <button id="themeToggle" class="icon" title="Prze≈ÇƒÖcz motyw">üåô</button>
      </div>
    </header>

    <nav id="tabs" class="tabs">
      <div class="bar hide-mobile">
        <button data-tab="vault" class="active">Wpisy</button>
        <button data-tab="generator">Generator</button>
        <button data-tab="audit">Audyt</button>
        <button data-tab="backup">Kopia</button>
        <button data-tab="settings">‚öôÔ∏è Ustawienia</button>
      </div>
      <button id="menuBtn" class="hamburger show-mobile" aria-haspopup="true" aria-expanded="false" aria-controls="menuPanel">‚ò∞</button>
    </nav>

    <!-- wysuwane menu mobilne -->
    <div id="menuPanel" class="menu-panel" hidden>
      <div id="menuBackdrop" class="menu-backdrop"></div>
      <div class="menu-sheet" role="dialog" aria-modal="true" aria-labelledby="menuTitle">
        <div class="menu-header">
          <strong id="menuTitle">Menu</strong>
          <button id="menuClose" class="menu-close">‚úï</button>
        </div>
        <div class="menu-items">
          <button data-tab="vault">üìÅ Wpisy</button>
          <button data-tab="generator">üé≤ Generator</button>
          <button data-tab="audit">üß™ Audyt</button>
          <button data-tab="backup">üóÑÔ∏è Kopia</button>
          <button data-tab="settings">‚öôÔ∏è Ustawienia</button>
        </div>
      </div>
    </div>

    <!-- LOCK VIEW -->
    <section id="lockView" class="card">
      <h2 id="lockTitle">Odblokuj sejf</h2>
      <p id="lockInfo" class="muted">Podaj has≈Ço g≈Ç√≥wne, aby odszyfrowaƒá sejf.</p>
      <label>Has≈Ço g≈Ç√≥wne
        <input id="masterInput" type="password" autocomplete="current-password" inputmode="text" />
      </label>
      <label id="confirmLabel" hidden>Powt√≥rz has≈Ço
        <input id="masterConfirm" type="password" autocomplete="new-password" inputmode="text" />
      </label>
      <div class="row">
        <button id="unlockBtn">Dalej</button>
        <button id="bioUnlock" class="secondary" hidden>Face ID</button>
      </div>
      <p id="bioHint" class="muted"></p>
      <button id="bioFix" class="ghost" hidden>Od≈õwie≈º Face ID</button>
    </section>

    <!-- VAULT VIEW -->
    <section id="vaultView" class="card" style="display:none">
      <div class="row between">
        <div class="searchbar">
          <input id="search" type="search" placeholder="Szukaj po tytule, loginie, URL‚Ä¶" autocomplete="off">
        </div>
        <div class="row gap">
          <button id="addEntryBtn">+ Nowy wpis</button>
          <button id="lockBtn" class="secondary">Zablokuj</button>
        </div>
      </div>
      <div id="filtersBar" class="filters"></div>
      <p id="emptyInfo" class="muted" hidden>Brak wpis√≥w. Dodaj pierwszy.</p>
      <div id="list" class="list"></div>
    </section>

    <!-- GENERATOR -->
    <section id="generatorView" class="card" style="display:none">
      <h3>Generator has≈Ça</h3>
      <div class="grid-2">
        <label>D≈Çugo≈õƒá <input id="genLen" type="number" min="6" max="128" value="16"></label>
        <div class="row wrap">
          <label><input id="genLower" type="checkbox" checked> ma≈Çe</label>
          <label><input id="genUpper" type="checkbox" checked> WIELKIE</label>
          <label><input id="genDigits" type="checkbox" checked> 123</label>
          <label><input id="genSymbols" type="checkbox"> !@#</label>
        </div>
      </div>
      <div class="row">
        <button id="genBtn">Generuj</button>
        <button id="genCopy" class="secondary">Kopiuj</button>
        <span id="genCopied" class="muted" hidden>Skopiowano ‚úì</span>
      </div>
      <input id="genOut" type="text" readonly>
      <div class="meter">
        <div class="bar"><span id="genMeterBar"></span></div>
        <div class="label" id="genMeterLabel"></div>
      </div>
    </section>

    <!-- AUDYT -->
    <section id="auditView" class="card" style="display:none">
      <div class="row">
        <button id="runAuditBtn">Uruchom audyt</button>
      </div>
      <div id="auditResults" class="audit"></div>
    </section>

    <!-- BACKUP -->
    <section id="backupView" class="card" style="display:none">
      <h3>Kopia zapasowa</h3>
      <div class="row">
        <button id="exportBtn">Eksportuj zaszyfrowanƒÖ kopiƒô</button>
      </div>
      <div class="row">
        <input id="importFile" type="file" accept="application/json" hidden>
        <button id="chooseFileBtn" class="secondary">Wybierz plik</button>
        <span id="fileName" class="muted">Brak pliku</span>
        <button id="importBtn">Importuj</button>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="settingsView" class="card" style="display:none">
      <h3>Ustawienia</h3>
      <div class="grid-2">
        <label>Autoblokada (minuty)
          <input id="setAutolock" type="number" min="1" max="120" value="5">
        </label>
        <label>Audyt: wiek has≈Ça (dni)
          <input id="setAgeDays" type="number" min="1" max="3650" value="180">
        </label>
      </div>

      <div class="stack">
        <div class="muted">Filtry w zak≈Çadce Wpisy</div>
        <div class="row wrap gap">
          <label><input id="fOld" type="checkbox" checked> Stare</label>
          <label><input id="fShort" type="checkbox" checked> Kr√≥tkie</label>
          <label><input id="fWeak" type="checkbox" checked> S≈Çabe</label>
          <label><input id="fDup" type="checkbox" checked> Powt√≥rzone</label>
        </div>
      </div>

      <label class="row">
        <span class="grow">Maska ekran√≥w (gdy w tle)</span>
        <input id="setMask" type="checkbox" checked>
      </label>

      <div class="stack">
        <div class="muted">Szybkie odblokowanie (Face ID / Touch ID)</div>
        <div class="row wrap gap">
          <button id="passkeySetup">W≈ÇƒÖcz / skonfiguruj</button>
          <button id="passkeyRemove" class="ghost">Wy≈ÇƒÖcz</button>
          <button id="passkeyRefresh" class="ghost">Od≈õwie≈º Face ID</button>
          <span id="passkeyState" class="muted"></span>
        </div>
      </div>

      <div class="row">
        <button id="saveSettings">Zapisz ustawienia</button>
        <span id="savedInfo" class="muted" hidden>Zapisano ‚úì</span>
      </div>
    </section>
  </div>

  <!-- Snack: cofniƒôcie zmiany has≈Ça -->
  <div id="snackbar" class="snackbar" hidden>
    <span id="snackText">Has≈Ço zmienione.</span>
    <button id="snackUndo" class="ghost" type="button">Cofnij</button>
  </div>

  <!-- Snack po auto-blokadzie -->
  <div id="lockSnack" class="snackbar" hidden>
    <span>Zablokowano po bezczynno≈õci.</span>
    <button id="lockSnackFace" type="button">Odblokuj Face ID</button>
    <button id="lockSnackClose" type="button" class="ghost">Zamknij</button>
  </div>

  <!-- Maska prywatno≈õci -->
  <div id="privacyMask" class="privacy-mask" hidden></div>

  <script src="./app.js"></script>
</body>
</html>
